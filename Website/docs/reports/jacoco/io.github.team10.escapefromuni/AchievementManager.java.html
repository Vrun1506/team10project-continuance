<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AchievementManager.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.github.team10.escapefromuni</a> &gt; <span class="el_source">AchievementManager.java</span></div><h1>AchievementManager.java</h1><pre class="source lang-java linenums">package io.github.team10.escapefromuni;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.files.FileHandle;
import java.util.ArrayList;

/**
 * NEW CLASS
 * AchievementManager class that handles the loading, saving and updating of game achievements.
 */
<span class="fc" id="L11">public class AchievementManager {</span>

<span class="fc" id="L13">    private final ArrayList&lt;Achievement&gt; achievements = new ArrayList&lt;&gt;();</span>

    /**
     * Initialises all achievements, setting their complete status to false.
     */
    public void initAchievements() {
<span class="fc" id="L19">        System.out.println(&quot;Initialising Achievements...&quot;);</span>
<span class="pc bpc" id="L20" title="1 of 2 branches missed.">        if (!achievements.isEmpty()) {</span>
<span class="nc" id="L21">            System.out.println(&quot;Achievements are already initialised!&quot;);</span>
        } else {
<span class="fc bfc" id="L23" title="All 2 branches covered.">            for (AchievementType type : AchievementType.values()) {</span>
<span class="fc" id="L24">                achievements.add(new Achievement(type, false));</span>
            }
<span class="fc" id="L26">            System.out.println(&quot;Initialised &quot; + achievements.size() + &quot;/&quot; + AchievementType.values().length + &quot; achievements!&quot;);</span>
        }
<span class="fc" id="L28">    }</span>

    /**
     * Loads achievements from file, 'achievements.txt'.
     * If achievements are already loaded, does nothing.
     * If it cannot find the file, then initialises achievements instead.
     */
    public void loadAchievements() {
<span class="fc" id="L36">        System.out.println(&quot;Loading Achievements...&quot;);</span>
<span class="pc bpc" id="L37" title="1 of 2 branches missed.">        if (!achievements.isEmpty()) {</span>
<span class="nc" id="L38">            System.out.println(&quot;Achievements are already loaded!&quot;);</span>
        } else {
            try {
<span class="fc" id="L41">                FileHandle file = Gdx.files.local(&quot;achievements.txt&quot;);</span>
<span class="fc" id="L42">                String[] text = file.readString().split(&quot;\n&quot;);</span>
<span class="fc bfc" id="L43" title="All 2 branches covered.">                for (String substring : text) {</span>
<span class="fc" id="L44">                    String[] values = substring.split(&quot;\\|&quot;);</span>
<span class="fc" id="L45">                    achievements.add(new Achievement(AchievementType.valueOf(values[0]), Boolean.parseBoolean(values[1])));</span>
                }
<span class="nc" id="L47">            } catch (Exception e) { // if 'achievements.json' not found i.e. first time playing</span>
<span class="nc" id="L48">                System.out.println(e.getMessage());</span>
<span class="nc" id="L49">                initAchievements();</span>
<span class="fc" id="L50">            }</span>
<span class="fc" id="L51">            System.out.println(&quot;Loaded &quot; + achievements.size() + &quot;/&quot; + AchievementType.values().length + &quot; achievements!&quot;);</span>
        }
<span class="fc" id="L53">    }</span>

    /**
     * Stores achievements to file, 'achievements.txt', overwriting any data.
     */
    public void saveAchievements() {
<span class="fc" id="L59">        System.out.println(&quot;Saving Achievements...&quot;);</span>
<span class="fc" id="L60">        int total = 0;</span>
<span class="fc" id="L61">        StringBuilder text = new  StringBuilder();</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">        for (Achievement a : achievements) {</span>
<span class="fc" id="L63">            text.append(a).append(&quot;\n&quot;);</span>
<span class="fc" id="L64">            total++;</span>
<span class="fc" id="L65">        }</span>

<span class="fc" id="L67">        FileHandle file = Gdx.files.local(&quot;achievements.txt&quot;);</span>
<span class="fc" id="L68">        file.writeString(text.toString(), false);</span>
<span class="fc" id="L69">        System.out.println(&quot;Saved &quot; + total + &quot;/&quot; + AchievementType.values().length + &quot; achievements!&quot;);</span>
<span class="fc" id="L70">    }</span>

    /**
     * Prints all achievements to terminal, primarily used for debugging.
     */
    public void printAchievements() {
<span class="fc" id="L76">        System.out.println(&quot;Printing Achievements...&quot;);</span>
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">        if  (achievements.isEmpty()) {</span>
<span class="nc" id="L78">            System.out.println(&quot;There are no achievements.&quot;);</span>
        } else {
<span class="fc" id="L80">            int total = 0;</span>
<span class="fc" id="L81">            StringBuilder output = new StringBuilder();</span>
<span class="fc bfc" id="L82" title="All 2 branches covered.">            for (Achievement a : achievements) {</span>
<span class="fc" id="L83">                output.append(a).append(&quot;\n&quot;);</span>
<span class="fc" id="L84">                total++;</span>
<span class="fc" id="L85">            }</span>
<span class="fc" id="L86">            System.out.println(output);</span>
<span class="fc" id="L87">            System.out.println(&quot;Printed &quot; + total + &quot;/&quot; + AchievementType.values().length + &quot; achievements!&quot;);</span>
        }
<span class="fc" id="L89">    }</span>

    /**
     * check_ENUM_TYPE_NAME methods.
     * probably a much easier and more modular way to do this, but we don't have that many achievements so who really cares :).
     * used to set their respective achievement to complete once their condition is met.
     */

    public void check_POSITIVE_EVENTS(float count, float total) { // achievements[0]
<span class="fc bfc" id="L98" title="All 2 branches covered.">        if (count &gt;= total) { achievements.get(0).setComplete(true); }</span>
<span class="fc" id="L99">    }</span>

    public void check_NEGATIVE_EVENTS(float count, float total) { // achievements[1]
<span class="fc bfc" id="L102" title="All 2 branches covered.">        if (count &gt;= total) { achievements.get(1).setComplete(true); }</span>
<span class="fc" id="L103">    }</span>

    public void check_HIDDEN_EVENTS(float count, float total) { // achievements[2]
<span class="fc bfc" id="L106" title="All 2 branches covered.">        if (count &gt;= total) { achievements.get(2).setComplete(true); }</span>
<span class="fc" id="L107">    }</span>

    public void check_ALL_EVENTS(float count, float total) { // achievements[3]
<span class="fc bfc" id="L110" title="All 2 branches covered.">        if (count &gt;= total) { achievements.get(3).setComplete(true); }</span>
<span class="fc" id="L111">    }</span>

    public void check_ZERO_TIMER() { // achievements[4]
<span class="fc" id="L114">        achievements.get(4).setComplete(true);</span>
<span class="fc" id="L115">    }</span>

    public void check_PASS() { // achievements[5]
<span class="nc" id="L118">        achievements.get(5).setComplete(true);</span>
<span class="nc" id="L119">    }</span>

    public void check_FAIL() { // achievements[6]
<span class="nc" id="L122">        achievements.get(6).setComplete(true);</span>
<span class="nc" id="L123">    }</span>

    public void check_TWENTY_FIVE_SECONDS() { // achievements[7]
<span class="nc" id="L126">        achievements.get(7).setComplete(true);</span>
<span class="nc" id="L127">    }</span>

    // getters and setters
<span class="fc" id="L130">    public ArrayList&lt;Achievement&gt; getAchievements() { return achievements; }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>